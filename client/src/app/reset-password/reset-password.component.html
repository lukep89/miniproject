<div class="container">
  <div class="bg-image"></div>
  <div class="input-container">
    <mat-card>
      <b><span>Reset Password</span></b>
      <form [formGroup]="resetPasswordForm">
        <div fxFlex fxLayout="column">
          <div fxFlex fxLayout="row wrap">
            <mat-form-field appearance="fill" fxFlex>
              <mat-label>New Password</mat-label>
              <input
                matInput
                formControlName="newPassword"
                type="password"
                required
                [type]="hideNewPassword ? 'password' : 'text'"
              />
              <button
                type="button"
                mat-icon-button
                matSuffix
                (click)="hideNewPassword = !hideNewPassword"
                [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="'newPassword'"
              >
                <mat-icon>
                  {{
                    hideNewPassword ? "visibility_off" : "visibility"
                  }}</mat-icon
                >
              </button>
              <mat-error
                *ngIf="
                  resetPasswordForm.controls['newPassword']?.touched &&
                  resetPasswordForm.controls['newPassword']?.invalid
                "
              >
                <span
                  *ngIf="resetPasswordForm.controls['newPassword']?.errors?.['required']"
                  >This field is mandatory</span
                >
              </mat-error>
            </mat-form-field>
          </div>

          <div fxFlex fxLayout="row wrap">
            <mat-form-field appearance="fill" fxFlex>
              <mat-label>Confirm Password</mat-label>
              <input
                matInput
                formControlName="confirmPassword"
                type="password"
                required
                [type]="hideConfirmPassword ? 'password' : 'text'"
              />
              <button
                type="button"
                mat-icon-button
                matSuffix
                (click)="hideConfirmPassword = !hideConfirmPassword"
                [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="'confirmPassword'"
              >
                <mat-icon>
                  {{
                    hideConfirmPassword ? "visibility_off" : "visibility"
                  }}</mat-icon
                >
              </button>
              <mat-error
                *ngIf="
                  resetPasswordForm.controls['confirmPassword']?.touched &&
                  resetPasswordForm.controls['confirmPassword']?.invalid
                "
              >
                <span
                  *ngIf="resetPasswordForm.controls['confirmPassword']?.errors?.['required']"
                  >This field is mandatory</span
                >
              </mat-error>
              <mat-hint
                *ngIf="
                  validateSubmit() &&
                  !resetPasswordForm.controls['confirmPassword'].invalid
                "
              >
                <span>New Password & Confirm Password does not match</span>
              </mat-hint>
            </mat-form-field>
          </div>
        </div>
      </form>

      <div>
        <button
          mat-flat-button
          color="primary"
          class="float-right"
          (click)="handlePasswordChangeSubmit()"
          [disabled]="
            validateSubmit() ||
            !(resetPasswordForm.valid && resetPasswordForm.dirty)
          "
        >
          <mat-icon>save</mat-icon>Reset Password
        </button>
      </div>
    </mat-card>
  </div>
</div>
